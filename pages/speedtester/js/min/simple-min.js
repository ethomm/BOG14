function startCollada(){stopWatch.start();var e=new THREE.ColladaLoader;e.options.convertUpAxis=!0,e.load(colladaModel,function(e){nextRound()},function(e){totalBytes=e.total/1e6})}function startJson(){stopWatch.start();var e=new THREE.ObjectLoader;e.load("./modells/mil2.json",function(e){model=e,nextRound()},function(e){totalBytes=e.total/1e6})}function nextRound(){render(),stopWatch.stop(),updateView(),runNewTest(),rounds++}function clearTest(){document.getElementById("testContainer").innerHTML="",document.getElementById("result").innerHTML="",rounds=1,totalTime=0,maksTime=0,minTime=0,totalSpeed=0,maksSpeed=0,minSpeed=0,totalBytes=0}function updateView(){totalTime+=result,1===rounds?(maksTime=result,minTime=result):result>maksTime?maksTime=result:minTime>result&&(minTime=result);var e=totalBytes/result;totalSpeed+=e,1===rounds&&(minSpeed=e,maksSpeed=e),e>minSpeed?minSpeed=e:maksSpeed>e&&(maksSpeed=e),$("#size").text(totalBytes.toFixed(2)+" mb"),$("#mintime").text(minTime+" sekunder"),$("#maxtime").text(maksTime+" sekunder"),$("#avgtime").text((totalTime/rounds).toFixed(3)+" sekunder"),$("#maxspeed").text(maksSpeed.toFixed(3)+" mb/s"),$("#minspeed").text(minSpeed.toFixed(3)+" mb/s"),$("#avgspeed").text((totalSpeed/rounds).toFixed(3)+" mb/s")}function showResult(){var e=new Date,t=isCollada?"Collada":"JSON";$("#result").append('<h2>Resultat</h2><h6 class="time">'+e+"</h6><p>Testen tok : "+totalTime.toFixed(2)+' sekunder </p><p class="ingress">GJENNOMSNITTSFART '+t.toUpperCase()+'</p><span class="green">'+(totalSpeed/rounds).toFixed(2)+"</span> mb/s<p><strong>på "+rounds+" runder</strong></p>")}function runNewTest(){startedTest?startedTest&&antallRunder>rounds?($("#testContainer").prepend('<div class="row test"><div class="col-md-2">Runde: #'+rounds+'</div><div clas="col-md4">Tok <strong>'+result+"</strong> sekunder med en gjennomsnittsfart på <strong>"+(totalBytes/result).toFixed(3)+" mb/s</strong>. </div>"),isCollada?startCollada():startJson()):($("#testContainer").prepend('<div class="row test"><div class="col-md-2">Runde: #'+rounds+'</div><div clas="col-md4">Tok <strong>'+result.toFixed(2)+"</strong> sekunder med en gjennomsnittsfart på <strong>"+(totalBytes/result).toFixed(3)+" mb/s</strong>. </div>"),$("#testContainer").prepend('<div class="row test"><div class="col-md-4">Finnished</div></div>'),startedTest=!1,showResult()):($("#testContainer").prepend('<div class="row test"><div class="col-md-4">Started</div></div>'),isCollada?startCollada():startJson(),startedTest=!0)}function render(){renderer.render(scene,camera),requestAnimationFrame(render)}$(document).ready(function(){$("#startcollada").on("click",function(){antallRunder=$("#antall").val(),clearTest(),runNewTest(),isCollada=!0}),$("#startjson").on("click",function(){antallRunder=$("#antall").val(),clearTest(),runNewTest(),isCollada=!1}),$("#cancel").on("click",function(){rounds=antallRunder=$("#antall").val()})});var scene=new THREE.Scene,renderer=new THREE.WebGLRenderer,light=new THREE.HemisphereLight(16777198,526368,9),camera=new THREE.PerspectiveCamera(35,window.innerWidth/window.innerHeight,1,1e3);scene.add(light),scene.add(camera);var colladaModel="modells/mil.dae",antallRunder=5,result=0,rounds=0,totalTime=0,maksTime=0,minTime=0,totalSpeed=0,maksSpeed=0,minSpeed=0,totalBytes=0,startedTest=!1,isCollada=!0,stopWatch={startTime:0,start:function(){this.startTime=new Date},stop:function(e){var t=this.startTime,s=new Date;result=(s-t)/1e3}};