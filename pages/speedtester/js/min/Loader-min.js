THREE.Loader=function(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}},THREE.Loader.prototype={constructor:THREE.Loader,crossOrigin:void 0,extractUrlBase:function(a){var e=a.split("/");return 1===e.length?"./":(e.pop(),e.join("/")+"/")},initMaterials:function(a,e,r){for(var p=[],s=0;s<a.length;++s)p[s]=this.createMaterial(a[s],e,r);return p},createMaterial:function(){var a,e,r;return function(p,s,t){function o(a,r,p,o,c){var n=s+a,m=THREE.Loader.Handlers.get(n),l;null!==m?l=m.load(n):(e.setCrossOrigin(t),l=e.load(n)),void 0!==r&&(l.repeat.fromArray(r),1!==r[0]&&(l.wrapS=THREE.RepeatWrapping),1!==r[1]&&(l.wrapT=THREE.RepeatWrapping)),void 0!==p&&l.offset.fromArray(p),void 0!==o&&("repeat"===o[0]&&(l.wrapS=THREE.RepeatWrapping),"mirror"===o[0]&&(l.wrapS=THREE.MirroredRepeatWrapping),"repeat"===o[1]&&(l.wrapT=THREE.RepeatWrapping),"mirror"===o[1]&&(l.wrapT=THREE.MirroredRepeatWrapping)),void 0!==c&&(l.anisotropy=c);var f=THREE.Math.generateUUID();return i[f]=l,f}void 0===a&&(a=new THREE.Color),void 0===e&&(e=new THREE.TextureLoader),void 0===r&&(r=new THREE.MaterialLoader);var i={},c={uuid:THREE.Math.generateUUID(),type:"MeshLambertMaterial"};for(var n in p){var m=p[n];switch(n){case"DbgColor":c.color=m;break;case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=m;break;case"blending":c.blending=THREE[m];break;case"colorDiffuse":c.color=a.fromArray(m).getHex();break;case"colorSpecular":c.specular=a.fromArray(m).getHex();break;case"colorEmissive":c.emissive=a.fromArray(m).getHex();break;case"specularCoef":c.shininess=m;break;case"shading":"basic"===m.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===m.toLowerCase()&&(c.type="MeshPhongMaterial");break;case"mapDiffuse":c.map=o(m,p.mapDiffuseRepeat,p.mapDiffuseOffset,p.mapDiffuseWrap,p.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapLight":c.lightMap=o(m,p.mapLightRepeat,p.mapLightOffset,p.mapLightWrap,p.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=o(m,p.mapAORepeat,p.mapAOOffset,p.mapAOWrap,p.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=o(m,p.mapBumpRepeat,p.mapBumpOffset,p.mapBumpWrap,p.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=m;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=o(m,p.mapNormalRepeat,p.mapNormalOffset,p.mapNormalWrap,p.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=[m,m];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=o(m,p.mapSpecularRepeat,p.mapSpecularOffset,p.mapSpecularWrap,p.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapAlpha":c.alphaMap=o(m,p.mapAlphaRepeat,p.mapAlphaOffset,p.mapAlphaWrap,p.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=THREE.BackSide;break;case"doubleSided":c.side=THREE.DoubleSide;break;case"transparency":console.warn("THREE.Loader: transparency has been renamed to opacity"),c.opacity=m;break;case"opacity":case"transparent":case"depthTest":case"depthWrite":case"transparent":case"visible":case"wireframe":c[n]=m;break;case"vertexColors":m===!0&&(c.vertexColors=THREE.VertexColors),"face"===m&&(c.vertexColors=THREE.FaceColors);break;default:console.error("Loader.createMaterial: Unsupported",n,m)}}return"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),r.setTextures(i),r.parse(c)}}()},THREE.Loader.Handlers={handlers:[],add:function(a,e){this.handlers.push(a,e)},get:function(a){for(var e=this.handlers,r=0,p=e.length;p>r;r+=2){var s=e[r],t=e[r+1];if(s.test(a))return t}return null}};